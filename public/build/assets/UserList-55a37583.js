import{Q as b,r as u,h as v,T as z,j as A,o as n,b as c,a as l,w as S,e,k as F,v as T,f as q,F as N,l as L,u as r,t as m,g as O,O as k,E as h}from"./app-0eb51d2d.js";import"https://ajax.googleapis.com/ajax/libs/model-viewer/3.3.0/model-viewer.min.js";import{_ as p,a as g,b as f}from"./TextInput-b14fe5e5.js";import{_ as D}from"./Pagination-eea62adb.js";import"./Link-0dce55ce.js";const H={class:"bg-gray-50 dark:bg-gray-900 p-3 sm:p-5"},Q={class:"flex justify-between"},G={class:"text-lg text-gray-800 dark:text-white mb-6"},I={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},J={class:"mb-7"},K={class:"mb-7"},P={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},R={class:"mb-7"},W={class:"mb-7"},X={class:"flex w-full justify-end items-center gap-4"},Y=e("button",{type:"submit",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},"Добавить пользователя",-1),Z={class:"max-w-screen-xl px-2 bg-gray-50 dark:bg-gray-900"},ee={class:"bg-white dark:bg-gray-800 relative shadow-md sm:rounded-lg overflow-hidden"},se={class:"flex flex-col md:flex-row items-center justify-between space-y-3 md:space-y-0 md:space-x-4 p-4 bg-gray-50 dark:bg-gray-900"},te={class:"w-full md:w-1/2"},ae=e("label",{for:"simple-search",class:"sr-only"},"Поиск",-1),oe={class:"relative w-full"},le=e("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},[e("svg",{"aria-hidden":"true",class:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"currentColor",viewbox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1),re=e("svg",{class:"h-3.5 w-3.5 mr-2",fill:"currentColor",viewbox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},[e("path",{"clip-rule":"evenodd","fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z"})],-1),de={class:"overflow-x-auto"},ie={class:"w-full text-sm text-left text-gray-500 dark:text-gray-400"},ne=e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},[e("tr",null,[e("th",{scope:"col",class:"px-4 py-3"},"#"),e("th",{scope:"col",class:"px-4 py-3"},"Логин"),e("th",{scope:"col",class:"px-4 py-3"},"E-mail"),e("th",{scope:"col",class:"px-4 py-3"},"Роль пользователя"),e("th",{scope:"col",class:"px-4 py-3"},[e("span",{class:"sr-only"},"Действия")])])],-1),ce={class:"px-4 py-3"},ue={class:"px-4 py-3"},me={class:"px-4 py-3"},pe={class:"px-4 py-3"},ge={key:0,class:"bg-blue-100 text-blue-800 flex w-20 justify-center items-center text-xs font-medium me-2 px-2 py-1 rounded dark:bg-blue-900 dark:text-blue-300"},fe={key:1,class:"bg-yellow-100 text-yellow-800 text-xs flex w-20 justify-center items-center font-medium me-2 px-2 py-1 rounded dark:bg-yellow-900 dark:text-yellow-300"},ye={class:"px-4 py-3 flex items-center justify-end"},xe=["id","data-dropdown-toggle"],he=e("svg",{class:"w-5 h-5","aria-hidden":"true",fill:"currentColor",viewbox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z"})],-1),we=[he],_e=["id"],be=["aria-labelledby"],ve=["onClick"],ke={class:"py-1"},Ve=["onClick"],Ce={class:"mt-4 py-4 px-10"},Ae={__name:"UserList",props:{users:Object},setup(Ue){const w=b().props.users,V=b().props.search,_=u(!1),i=u(!1),d=u(!1),y=u(V);v(y,a=>{k.get("/admin/user/index",{search:a},{preserveState:!1})});const t=z({name:"",email:"",isAdmin:"",password:"",password_confirmation:""}),C=()=>{_.value=!0,i.value=!1,d.value=!0},U=async()=>{try{await t.post(route("admin.user.store"),{onSuccess:a=>{h({title:"Успешно",message:a.props.flash.success,type:"success"}),d.value=!1},onFinish:()=>t.reset("password","password_confirmation")})}catch(a){h({title:"Произошла ошибка",message:a,type:"error"}),console.log(a)}},$=a=>{t.id=a.id,t.name=a.name,t.email=a.email,t.isAdmin=a.isAdmin,t.password=a.password,t.password_confirmation=a.password_confirmation,i.value=!0,_.value=!1,d.value=!0},j=async()=>{try{await t.post(route("admin.user.update/"+t.id.value),{onSuccess:a=>{d.value=!1,h({title:"Успешно",message:a.props.flash.success,type:"success"})}})}catch(a){console.log(a)}},M=(a,o)=>{Swal.fire({title:"Вы точно хотите удалить?",text:"Действие не удатся вернуть!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Нет",confirmButtonText:"Удалить!"}).then(x=>{if(x.isConfirmed)try{k.delete("destroy/"+a.id,{onSuccess:s=>{Swal.fire({toast:!0,icon:"success",position:"top-end",showConfirmButton:!1,title:s.props.flash.success})}})}catch(s){console.log(s)}})};return v((()=>{i.value==!0&&d.value==!1&&(i.value=!1,t.reset())})()),(a,o)=>{const x=A("el-dialog");return n(),c("section",H,[l(x,{modelValue:d.value,"onUpdate:modelValue":o[6]||(o[6]=s=>d.value=s),class:"text-gray-800 dark:bg-gray-800 dark:text-gray-200",width:"80%"},{default:S(()=>[e("form",{onSubmit:o[5]||(o[5]=O(s=>i.value?j():U(),["prevent"]))},[e("div",Q,[e("h3",G,m(i.value?"Редактировать пользователя":"Добавить пользователя"),1)]),e("div",I,[e("div",J,[l(p,{for:"name",value:"Логин"}),l(g,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:r(t).name,"onUpdate:modelValue":o[0]||(o[0]=s=>r(t).name=s),required:"",autofocus:"",autocomplete:"name"},null,8,["modelValue"]),l(f,{class:"mt-2",message:r(t).errors.name},null,8,["message"])]),e("div",K,[l(p,{for:"email",value:"E-mail"}),l(g,{id:"email",type:"email",class:"mt-1 block w-full",modelValue:r(t).email,"onUpdate:modelValue":o[1]||(o[1]=s=>r(t).email=s),required:"",autocomplete:"username"},null,8,["modelValue"]),l(f,{class:"mt-2",message:r(t).errors.email},null,8,["message"])])]),e("div",P,[e("div",R,[l(p,{for:"password",value:"Пароль"}),l(g,{id:"password",type:"password",class:"mt-1 block w-full",modelValue:r(t).password,"onUpdate:modelValue":o[2]||(o[2]=s=>r(t).password=s),required:"",autocomplete:"new-password"},null,8,["modelValue"]),l(f,{class:"mt-2",message:r(t).errors.password},null,8,["message"])]),e("div",W,[l(p,{for:"password_confirmation",value:"Повторите пароль"}),l(g,{id:"password_confirmation",type:"password",class:"mt-1 block w-full",modelValue:r(t).password_confirmation,"onUpdate:modelValue":o[3]||(o[3]=s=>r(t).password_confirmation=s),required:"",autocomplete:"new-password"},null,8,["modelValue"]),l(f,{class:"mt-2",message:r(t).errors.password_confirmation},null,8,["message"])])]),e("div",X,[e("button",{type:"button",onClick:o[4]||(o[4]=s=>d.value=!1),class:"text-white bg-black hover:bg-gray-900 focus:ring-4 focus:outline-none focus:ring-gray-900 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-dark dark:hover:bg-slate-900 dark:focus:ring-black"},"Отменить"),Y])],32)]),_:1},8,["modelValue"]),e("div",Z,[e("div",ee,[e("div",se,[e("div",te,[ae,e("div",oe,[le,F(e("input",{type:"text","onUpdate:modelValue":o[7]||(o[7]=s=>y.value=s),id:"simple-search",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full pl-10 p-2 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Поиск"},null,512),[[T,y.value,void 0,{lazy:!0}]])])]),e("div",{class:"w-full md:w-auto flex flex-col md:flex-row space-y-2 md:space-y-0 items-stretch md:items-center justify-end md:space-x-3 flex-shrink-0"},[e("button",{type:"button",onClick:C,class:"flex items-center justify-center text-white bg-primary-700 hover:bg-primary-800 focus:ring-4 focus:ring-primary-300 font-medium rounded-lg text-sm px-4 py-2 dark:bg-primary-600 dark:hover:bg-primary-700 focus:outline-none dark:focus:ring-primary-800"},[re,q(" Добавить пользователя ")])])]),e("div",de,[e("table",ie,[ne,e("tbody",null,[(n(!0),c(N,null,L(r(w).data,(s,B)=>(n(),c("tr",{key:s.id,class:"border-b dark:border-gray-700"},[e("td",ce,m(B+1),1),e("td",ue,m(s.name),1),e("td",me,m(s.email),1),e("td",pe,[s.isAdmin==1?(n(),c("span",ge,"Админ")):(n(),c("span",fe,"Клиент"))]),e("td",ye,[e("button",{id:`${s.id}-button`,"data-dropdown-toggle":`${s.id}`,class:"inline-flex items-center p-0.5 text-sm font-medium text-center text-gray-500 hover:text-gray-800 rounded-lg focus:outline-none dark:text-gray-400 dark:hover:text-gray-100",type:"button"},we,8,xe),e("div",{id:`${s.id}`,class:"hidden z-10 w-44 bg-white rounded divide-y divide-gray-100 shadow dark:bg-gray-700 dark:divide-gray-600"},[e("ul",{class:"py-1 text-sm text-gray-700 dark:text-gray-200","aria-labelledby":`${s.id}-button`},[e("li",null,[e("a",{href:"#",onClick:E=>$(s),class:"block py-2 px-4 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"},"Изменить пользователя",8,ve)])],8,be),e("div",ke,[e("a",{href:"#",onClick:E=>M(s),class:"block py-2 px-4 text-sm text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 dark:text-gray-200 dark:hover:text-white"},"Удалить",8,Ve)])],8,_e)])]))),128))])]),e("div",Ce,[l(D,{data:r(w)},null,8,["data"])])])])])])}}};export{Ae as default};
